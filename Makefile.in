# assumes the following directories already exist
# common  (MCS-wide header files; specifically mcs.h)

INC_DIR = src
DAT_DIR = share

HAVE_PYTHON = @HAVE_PYTHON@

all: sch exec tp python

.PHONY: sch
sch:
	$(MAKE) -C sch

.PHONY: exec
exec:
	$(MAKE) -C exec

.PHONY: tp
tp:
	$(MAKE) -C tp

.PHONY: python
python:
	ifeq ($(HAVE_PYTHON))
		$(MAKE) -C python
	endif

.PHONY: install
install:
	$(MAKE) -C sch install
	$(MAKE) -C exec install
	$(MAKE) -C tp install
	ifeq ($(HAVE_PYTHON))
		$(MAKE) -C python install
	endif

.PHONY: install-services
install-services:
	$(MAKE) -C services install

.PHONY: clean
clean:
	$(MAKE) -C sch clean
	$(MAKE) -C exec clean
	$(MAKE) -C tp clean
	$(MAKE) -C python clean

$(INSTALL_INC_DIR)/lwa_mcs: common/*.h
	mkdir -p $@
	cp $? $@/

$(INSTALL_LIB_DIR)/pkgconfig: $(DAT_DIR)/*.pc
	mkdir -p $@
	cp $? $@/
